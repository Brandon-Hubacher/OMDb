<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="searchPage.css" />
    <link rel="stylesheet" href="/navigationBar.css" />
    <title>Search Page</title>
  </head>
  <body>
    <img id="logo" src="../images/logo.png" alt="LOGO" />
    <nav id="nav">
      <ul id="nav-links">
        <li>
          <a href="/home/checkpoint1.html">Home</a>
        </li>
        <li>
          <a href="/genres/genres.html">Genres</a>
        </li>
        <li>
          <a href="/favorites/favorites.html">Favorites</a>
        </li>
        <li>
          <a href="/watched movies/watched_movies.html">Watched Movies</a>
        </li>
        <li>
          <a href="/contact/contact.html">Contact Us</a>
        </li>
      </ul>

      <div id="burger">
        <div class="line1"></div>
        <div class="line2"></div>
        <div class="line3"></div>
      </div>
    </nav>

    <form action="checkpoint1.php" method="get">
      <div id="topnavContainer">
        <input
          id="search"
          type="text"
          name="searchTerm"
          placeholder="Search OMDb: Movies"
        />
        <a href="landingpage.html">Sign Up</a>
        <a href="landingpage.html">Login In</a>
      </div>
      <div id="content">
        <div id="movie-slider"></div>
      </div>
    </form>
    <div id="flexContainer">
      <div id="resultsContainer">
        <ul id="results"></ul>
      </div>
    </div>

    <script src="/home/checkpoint1.js" charset="utf-8"></script>

    <script>
      document.addEventListener("click", function (event) {
        var target = event.target;

        // TODO: Don't search for movie if link is in navigation bar
        if (target.tagName === "A" && !(target.href.split(".")[1] > 4)) {
          console.log(target.href.split("."));

          var imdbID = target.href.split("=")[1];
          console.log("href: " + target.href);
          console.log("imdbID: " + imdbID);
          var url =
            "/moviePage/movie.html?imdbID=" + encodeURIComponent(imdbID);

          document.location.href = url;

          // Why is this required to make the page be directed to the proper path?
          event.preventDefault();
        }
      });
    </script>
    <script src="/omdb.js"></script>
  </body>
</html>
